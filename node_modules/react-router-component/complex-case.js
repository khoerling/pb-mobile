
var App = React.createClass({
  mixins: [RouterMixin],

  getInitialState: function() {
    // XXX: RouterMixin is too heavy weight probably and it could be refactored
    // into more self-contained pieces
    var match = this.getRouterState(this.props).match;
    return {
      mainPath: match.route.modal ? '/' : match.path,
      modalPath: match.route.modal ? match.path : '/some path which renders to nothing'
    };
  },

  render: function() {
    return (
      <div>
        <Locations path={this.state.mainPath} className="main">
          {this.props.children.filter((route) => !route.modal)}
        </Locations>
        <Locations path={this.state.modalPath} className="modal">
          {this.props.children.filter((route) => route.modal)}
        </Locations>
      </div>
    );
  }

});

React.renderComponent(
    <App>
      <Location path="/" handler={...} />
      <Location path="/page" handler={...} />
      <Location path="/modal" handler={...} modal />
      <Location path="/another/modal" handler={...} modal />
    </App>
, document.body);
